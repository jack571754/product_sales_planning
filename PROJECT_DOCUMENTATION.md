# Product Sales Planning System - 完整项目文档

> **版本**: 1.0.0  
> **最后更新**: 2025-12-13  
> **维护者**: 开发团队

---

## 📋 目录

1. [项目概述](#项目概述)
2. [技术架构](#技术架构)
3. [项目结构](#项目结构)
4. [核心功能模块](#核心功能模块)
5. [数据模型](#数据模型)
6. [API接口文档](#api接口文档)
7. [前端架构](#前端架构)
8. [开发指南](#开发指南)
9. [部署说明](#部署说明)
10. [测试文档](#测试文档)
11. [常见问题](#常见问题)

---

## 项目概述

### 1.1 项目简介

Product Sales Planning System（产品销售计划系统）是一个基于 Frappe 框架开发的企业级销售计划管理系统。系统提供完整的计划制定、审批、执行和数据分析功能，帮助企业高效管理多店铺、多商品的销售计划。

**项目信息**:
- **应用名称**: product_sales_planning
- **应用标题**: planning system
- **开发者**: lj
- **邮箱**: 571754723@qq.com
- **许可证**: MIT

### 1.2 核心特性

- ✅ **多维度计划管理**: 支持月度常规计划(MON)和专项促销活动(PRO)
- ✅ **多店铺支持**: 统一管理多个销售渠道和店铺
- ✅ **灵活的审批流程**: 可配置的多级审批工作流
- ✅ **实时数据看板**: 直观展示计划执行状态和统计数据
- ✅ **批量操作**: 支持商品数据的批量导入、导出和编辑
- ✅ **机制应用**: 自动化的促销机制配置和应用
- ✅ **权限控制**: 基于角色的细粒度权限管理

### 1.3 技术栈

**后端技术**:
- Frappe Framework (Python 3.10+)
- MariaDB/MySQL 数据库
- RESTful API 架构

**前端技术**:
- Vue 3.5.25 (Composition API)
- Frappe UI 0.1.234 组件库
- Vue Router 4.6.3
- Vite 5.0 构建工具
- TailwindCSS 3.4.17 样式框架
- Handsontable 16.2.0 表格组件
- Feather Icons 4.28.0

---

## 技术架构

### 2.1 整体架构图

```
┌─────────────────────────────────────────────────────────┐
│                     用户界面层                            │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │  计划看板    │  │  店铺详情    │  │  数据视图    │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                   前端应用层 (Vue 3)                      │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │ Composables  │  │ API Services │  │  Components  │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                   API 接口层 (RESTful)                    │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐  │
│  │Dashboard │ │Commodity │ │ Approval │ │  Store   │  │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘  │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                 业务逻辑层 (Frappe)                       │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │  Controllers │  │   Services   │  │    Utils     │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                   数据持久层 (MariaDB)                    │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │  DocTypes    │  │   Tables     │  │   Indexes    │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
```

### 2.2 前端架构

**分层设计**:
```
frontend/
├── 路由层 (Vue Router)
│   └── 页面路由配置和导航守卫
├── 页面层 (Pages)
│   └── 页面组件，负责UI渲染
├── 业务逻辑层 (Composables)
│   └── 可复用的业务逻辑和状态管理
├── API服务层 (Services)
│   └── API调用封装和数据转换
└── 组件层 (Components)
    └── 可复用的UI组件
```

---

## 快速开始

### 安装依赖
```bash
cd apps/product_sales_planning/frontend
yarn install
```

### 启动开发
```bash
# 后端
bench start

# 前端
cd apps/product_sales_planning/frontend
yarn dev
```

### 访问应用
```
http://localhost:8000/planning
```

### 运行测试
```bash
bench --site mysite.local execute product_sales_planning.tests.api_test_suite.run_api_tests
```

---

## 相关文档

- [项目总结](PROJECT_SUMMARY.md)
- [快速开始指南](快速开始指南.md)
- [前端重构总结](前端重构完成总结.md)
- [API测试文档](API_TEST_README.md)
- [API快速参考](API_QUICK_REFERENCE.md)

---

**最后更新**: 2025-12-13  
**维护者**: 开发团队
