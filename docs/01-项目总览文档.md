# Product Sales Planning System - é¡¹ç›®æ–‡æ¡£

> **ç‰ˆæœ¬**: 2.0.0  
> **æœ€åæ›´æ–°**: 2025-12-13  
> **ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
3. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
4. [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
5. [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
6. [APIæ–‡æ¡£](#apiæ–‡æ¡£)
7. [éƒ¨ç½²è¯´æ˜](#éƒ¨ç½²è¯´æ˜)
8. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

Product Sales Planning Systemï¼ˆäº§å“é”€å”®è®¡åˆ’ç³»ç»Ÿï¼‰æ˜¯ä¸€ä¸ªåŸºäº Frappe Framework v15 å¼€å‘çš„ä¼ä¸šçº§é”€å”®è®¡åˆ’ç®¡ç†ç³»ç»Ÿã€‚ç³»ç»Ÿæä¾›å®Œæ•´çš„è®¡åˆ’åˆ¶å®šã€å®¡æ‰¹ã€æ‰§è¡Œå’Œæ•°æ®åˆ†æåŠŸèƒ½ï¼Œå¸®åŠ©ä¼ä¸šé«˜æ•ˆç®¡ç†å¤šåº—é“ºã€å¤šå•†å“çš„é”€å”®è®¡åˆ’ã€‚

**é¡¹ç›®ä¿¡æ¯**:
- **åº”ç”¨åç§°**: product_sales_planning
- **åº”ç”¨æ ‡é¢˜**: planning system
- **å¼€å‘è€…**: lj
- **é‚®ç®±**: 571754723@qq.com
- **è®¸å¯è¯**: MIT
- **Frappeç‰ˆæœ¬**: v15+

### 1.2 æ ¸å¿ƒç‰¹æ€§

- âœ… **å¤šç»´åº¦è®¡åˆ’ç®¡ç†**: æ”¯æŒæœˆåº¦å¸¸è§„è®¡åˆ’(MON)å’Œä¸“é¡¹ä¿ƒé”€æ´»åŠ¨(PRO)
- âœ… **å¤šåº—é“ºæ”¯æŒ**: ç»Ÿä¸€ç®¡ç†å¤šä¸ªé”€å”®æ¸ é“å’Œåº—é“º
- âœ… **çµæ´»çš„å®¡æ‰¹æµç¨‹**: å¯é…ç½®çš„å¤šçº§å®¡æ‰¹å·¥ä½œæµ
- âœ… **å®æ—¶æ•°æ®çœ‹æ¿**: ç›´è§‚å±•ç¤ºè®¡åˆ’æ‰§è¡ŒçŠ¶æ€å’Œç»Ÿè®¡æ•°æ®
- âœ… **æ‰¹é‡æ“ä½œ**: æ”¯æŒå•†å“æ•°æ®çš„æ‰¹é‡å¯¼å…¥ã€å¯¼å‡ºå’Œç¼–è¾‘
- âœ… **æœºåˆ¶åº”ç”¨**: è‡ªåŠ¨åŒ–çš„ä¿ƒé”€æœºåˆ¶é…ç½®å’Œåº”ç”¨
- âœ… **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„ç»†ç²’åº¦æƒé™ç®¡ç†
- âœ… **åŒå‰ç«¯æ¶æ„**: ä¼ ç»ŸFrappe Page + ç°ä»£Vue 3 SPA

### 1.3 æŠ€æœ¯æ ˆ

**åç«¯æŠ€æœ¯**:
- Frappe Framework v15 (Python 3.10+)
- MariaDB/MySQL æ•°æ®åº“
- RESTful API æ¶æ„

**å‰ç«¯æŠ€æœ¯**:
- Vue 3.5.25 (Composition API)
- Frappe UI 0.1.234 ç»„ä»¶åº“
- Vue Router 4.6.3
- Vite 5.0 æ„å»ºå·¥å…·
- TailwindCSS 3.4.17 æ ·å¼æ¡†æ¶
- Handsontable 16.2.0 è¡¨æ ¼ç»„ä»¶ï¼ˆä¼ ç»ŸPageï¼‰
- Feather Icons 4.28.0

---

## å¿«é€Ÿå¼€å§‹

### 2.1 ç¯å¢ƒè¦æ±‚

- Python 3.10+
- Node.js 16+
- MariaDB 10.6+
- Frappe Framework v15

### 2.2 å®‰è£…æ­¥éª¤

#### 1. å®‰è£…åº”ç”¨

```bash
cd $PATH_TO_YOUR_BENCH
bench get-app $URL_OF_THIS_REPO --branch develop
bench --site [site-name] install-app product_sales_planning
```

#### 2. é…ç½®ç«™ç‚¹

åœ¨ `sites/[site-name]/site_config.json` ä¸­æ·»åŠ ï¼š
```json
{
  "ignore_csrf": 1
}
```

#### 3. å®‰è£…å‰ç«¯ä¾èµ–

```bash
cd apps/product_sales_planning/frontend
yarn install
```

#### 4. æ„å»ºå‰ç«¯

```bash
# å¼€å‘æ¨¡å¼
yarn dev

# ç”Ÿäº§æ„å»º
yarn build
```

#### 5. æ¸…é™¤ç¼“å­˜

```bash
bench --site [site-name] clear-cache
bench restart
```

### 2.3 ä¸€é”®åˆå§‹åŒ–ï¼ˆæ¨èï¼‰

```bash
cd apps/product_sales_planning
bash scripts/init_dev.sh --site [site-name]
```

### 2.4 è®¿é—®åº”ç”¨

- **Vue SPA**: `http://localhost:8000/planning`
- **ä¼ ç»ŸPage**: `http://localhost:8000/app/planning-dashboard`
- **å¼€å‘æ¨¡å¼**: `http://localhost:8080/planning` (Vue dev server)

### 2.5 ç”Ÿæˆæµ‹è¯•æ•°æ®

```bash
# ç”Ÿæˆæ‰€æœ‰æµ‹è¯•æ•°æ®
bench --site [site-name] execute product_sales_planning.fixtures.generate_test_data.generate_all_test_data

# åˆ›å»ºå®¡æ‰¹å·¥ä½œæµ
bench --site [site-name] execute product_sales_planning.fixtures.create_test_approval_workflow.create_test_workflow
```

---

## æŠ€æœ¯æ¶æ„

### 3.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ·ç•Œé¢å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Vue 3 SPA   â”‚  â”‚ Frappe Page  â”‚  â”‚  ç§»åŠ¨ç«¯é€‚é…  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å‰ç«¯åº”ç”¨å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Composables  â”‚  â”‚ API Services â”‚  â”‚  Components  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   API æ¥å£å±‚ (RESTful)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚Dashboard â”‚ â”‚Commodity â”‚ â”‚ Approval â”‚ â”‚  Store   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ä¸šåŠ¡é€»è¾‘å±‚ (Services)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Controllers â”‚  â”‚   Services   â”‚  â”‚    Utils     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®æŒä¹…å±‚ (MariaDB)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  DocTypes    â”‚  â”‚   Tables     â”‚  â”‚   Indexes    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 åŒå‰ç«¯æ¶æ„

é¡¹ç›®é‡‡ç”¨åŒå‰ç«¯æ¶æ„ï¼Œæ ¹æ®åœºæ™¯é€‰æ‹©æŠ€æœ¯æ ˆï¼š

#### ä¼ ç»Ÿ Frappe Page
- **ä½ç½®**: `planning_system/page/`
- **æŠ€æœ¯**: Frappe Desk + Handsontable
- **é€‚ç”¨åœºæ™¯**: å¤§æ•°æ®é‡è¡¨æ ¼ç¼–è¾‘
- **é¡µé¢**: planning_dashboard, store_detail, data_view
- **è·¯ç”±**: `/app/page-name`

#### Vue 3 SPA
- **ä½ç½®**: `frontend/`
- **æŠ€æœ¯**: Vue 3 + Frappe UI + Vite + Tailwind CSS
- **é€‚ç”¨åœºæ™¯**: ç°ä»£åŒ–UIäº¤äº’
- **æ„å»ºè¾“å‡º**: `product_sales_planning/public/planning/`
- **è·¯ç”±**: `/planning/*`

**å…±äº«åç«¯**: ä¸¤ç§å‰ç«¯è°ƒç”¨ç›¸åŒçš„ `@frappe.whitelist` API

### 3.3 ç›®å½•ç»“æ„

```
product_sales_planning/
â”œâ”€â”€ planning_system/
â”‚   â”œâ”€â”€ doctype/              # æ ¸å¿ƒæ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ approval_workflow/        # å®¡æ‰¹å·¥ä½œæµ
â”‚   â”‚   â”œâ”€â”€ commodity_schedule/       # å•†å“è®¡åˆ’
â”‚   â”‚   â”œâ”€â”€ schedule_tasks/           # è®¡åˆ’ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ store_list/               # åº—é“ºä¸»æ•°æ®
â”‚   â”‚   â””â”€â”€ tasks_store/              # ä»»åŠ¡-åº—é“ºå…³è”
â”‚   â””â”€â”€ page/                 # ä¼ ç»ŸFrappe Page
â”‚       â”œâ”€â”€ planning_dashboard/       # è®¡åˆ’çœ‹æ¿
â”‚       â”œâ”€â”€ store_detail/             # åº—é“ºè¯¦æƒ…
â”‚       â””â”€â”€ data_view/                # æ•°æ®æŸ¥çœ‹
â”œâ”€â”€ api/v1/                   # RESTful API
â”‚   â”œâ”€â”€ dashboard.py          # çœ‹æ¿API
â”‚   â”œâ”€â”€ commodity.py          # å•†å“API
â”‚   â”œâ”€â”€ store.py              # åº—é“ºAPI
â”‚   â”œâ”€â”€ approval.py           # å®¡æ‰¹API
â”‚   â”œâ”€â”€ data_view.py          # æ•°æ®è§†å›¾API
â”‚   â”œâ”€â”€ import_export.py      # å¯¼å…¥å¯¼å‡ºAPI
â”‚   â””â”€â”€ mechanism.py          # æœºåˆ¶API
â”œâ”€â”€ services/                 # ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚
â”‚   â””â”€â”€ commodity_service.py  # å•†å“è®¡åˆ’æœåŠ¡
â”œâ”€â”€ utils/                    # å·¥å…·ç±»
â”‚   â”œâ”€â”€ response_utils.py     # APIå“åº”æ ¼å¼åŒ–
â”‚   â”œâ”€â”€ validation_utils.py   # å‚æ•°éªŒè¯
â”‚   â”œâ”€â”€ api_decorators.py     # APIè£…é¥°å™¨
â”‚   â””â”€â”€ date_utils.py         # æ—¥æœŸå¤„ç†
â”œâ”€â”€ constants.py              # å¸¸é‡å®šä¹‰
â”œâ”€â”€ fixtures/                 # æµ‹è¯•æ•°æ®ç”Ÿæˆ
â”œâ”€â”€ www/                      # Webè·¯ç”±
â”‚   â”œâ”€â”€ planning.html         # Vue SPAå…¥å£
â”‚   â””â”€â”€ planning.py           # CSRF tokenæä¾›
â”œâ”€â”€ public/                   # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/                  # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ js/                   # å…¨å±€JS
â”‚   â””â”€â”€ planning/             # Vueæ„å»ºè¾“å‡º
â””â”€â”€ frontend/                 # Vue 3å‰ç«¯æºç 
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
    â”‚   â”œâ”€â”€ layouts/          # å¸ƒå±€ç»„ä»¶
    â”‚   â”œâ”€â”€ components/       # å¯å¤ç”¨ç»„ä»¶
    â”‚   â”œâ”€â”€ composables/      # ä¸šåŠ¡é€»è¾‘
    â”‚   â”œâ”€â”€ router.js         # è·¯ç”±é…ç½®
    â”‚   â””â”€â”€ main.js           # åº”ç”¨å…¥å£
    â”œâ”€â”€ vite.config.js        # Viteé…ç½®
    â”œâ”€â”€ tailwind.config.js    # Tailwindé…ç½®
    â””â”€â”€ package.json          # å‰ç«¯ä¾èµ–
```

---

## æ ¸å¿ƒåŠŸèƒ½

### 4.1 è®¡åˆ’ç®¡ç†

- **ä»»åŠ¡ç±»å‹**: MONï¼ˆæœˆåº¦å¸¸è§„è®¡åˆ’ï¼‰ã€PROï¼ˆä¸“é¡¹ä¿ƒé”€æ´»åŠ¨ï¼‰
- **åº—é“ºåˆ†é…**: ä¸€ä¸ªä»»åŠ¡å¯å…³è”å¤šä¸ªåº—é“º
- **å•†å“è§„åˆ’**: æ¯ä¸ªåº—é“ºå¯é…ç½®å¤šä¸ªå•†å“çš„é”€å”®è®¡åˆ’
- **çŠ¶æ€ç®¡ç†**: Draft â†’ Pending â†’ Approved/Rejected

### 4.2 å®¡æ‰¹æµç¨‹

è¯¦è§ [å®¡æ‰¹æµç¨‹ä¸“é¡¹æ–‡æ¡£](./å®¡æ‰¹æµç¨‹æ–‡æ¡£.md)

- **å¤šçº§å®¡æ‰¹**: æ”¯æŒé…ç½®å¤šçº§å®¡æ‰¹æ­¥éª¤
- **çµæ´»åˆ†é…**: åŸºäºè§’è‰²ã€åº—é“ºå±æ€§æˆ–åº—é“ºèŒƒå›´
- **æ“ä½œç±»å‹**: æäº¤ã€æ’¤å›ã€é€šè¿‡ã€é©³å›
- **å†å²è¿½è¸ª**: å®Œæ•´çš„å®¡æ‰¹å†å²è®°å½•

### 4.3 åº—é“ºè¯¦æƒ…é¡µ

è¯¦è§ [åº—é“ºè¯¦æƒ…é¡µä¸“é¡¹æ–‡æ¡£](./åº—é“ºè¯¦æƒ…é¡µæ–‡æ¡£.md)

- **å•†å“ç®¡ç†**: æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å•†å“è®¡åˆ’
- **æ‰¹é‡æ“ä½œ**: æ‰¹é‡å¯¼å…¥ã€å¯¼å‡ºã€æ›´æ–°
- **æœºåˆ¶åº”ç”¨**: è‡ªåŠ¨åº”ç”¨ä¿ƒé”€æœºåˆ¶
- **å®¡æ‰¹é›†æˆ**: å†…åµŒå®¡æ‰¹çŠ¶æ€å’Œæ“ä½œ

### 4.4 æ•°æ®çœ‹æ¿

- **ä»»åŠ¡æ€»è§ˆ**: å±•ç¤ºæ‰€æœ‰è®¡åˆ’ä»»åŠ¡
- **ç­›é€‰åŠŸèƒ½**: æŒ‰ç±»å‹ã€çŠ¶æ€ã€åº—é“ºç­›é€‰
- **ç»Ÿè®¡æ•°æ®**: å®æ—¶ç»Ÿè®¡å„çŠ¶æ€ä»»åŠ¡æ•°é‡
- **å¿«é€Ÿæ“ä½œ**: å¿«é€Ÿè¿›å…¥åº—é“ºè¯¦æƒ…

### 4.5 æ•°æ®è§†å›¾

- **å¤šç»´æŸ¥è¯¢**: æŒ‰ä»»åŠ¡ã€åº—é“ºã€å•†å“ç­‰ç»´åº¦æŸ¥è¯¢
- **æ•°æ®å¯¼å‡º**: æ”¯æŒExcelå¯¼å‡º
- **æ’åºåˆ†é¡µ**: çµæ´»çš„æ’åºå’Œåˆ†é¡µåŠŸèƒ½

---

## å¼€å‘æŒ‡å—

### 5.1 å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨Frappeå¼€å‘æœåŠ¡å™¨
bench start

# å¯åŠ¨Vueå¼€å‘æœåŠ¡å™¨
cd frontend && yarn dev

# ç›‘å¬æ–‡ä»¶å˜åŒ–
bench watch
```

### 5.2 å¸¸ç”¨å‘½ä»¤

```bash
# æ•°æ®åº“è¿ç§»
bench --site [site-name] migrate

# æ¸…é™¤ç¼“å­˜
bench --site [site-name] clear-cache

# é‡å¯æœåŠ¡
bench restart

# æŸ¥çœ‹æ—¥å¿—
bench --site [site-name] logs

# Pythonæ§åˆ¶å°
bench --site [site-name] console
```

### 5.3 ä»£ç è§„èŒƒ

**Python**:
- ä½¿ç”¨Tabç¼©è¿›
- è¡Œé•¿åº¦é™åˆ¶110å­—ç¬¦
- å˜é‡å‘½åï¼šsnake_case
- DocTypeå‘½åï¼šTitle Case with Spaces

**JavaScript/Vue**:
- ä½¿ç”¨Tabç¼©è¿›
- éµå¾ªESLintè§„åˆ™
- ä½¿ç”¨ES6+è¯­æ³•
- ç»„ä»¶ä½¿ç”¨`<script setup>`è¯­æ³•

### 5.4 APIå¼€å‘

```python
from product_sales_planning.utils.response_utils import success_response, error_response
from product_sales_planning.utils.validation_utils import validate_required_params
from product_sales_planning.constants import DocType

@frappe.whitelist()
def your_api_method(param1, param2):
    """APIæ–¹æ³•è¯´æ˜"""
    # å‚æ•°éªŒè¯
    validate_required_params({"param1": param1, "param2": param2})
    
    try:
        # ä¸šåŠ¡é€»è¾‘
        data = frappe.get_doc(DocType.COMMODITY_SCHEDULE, param1)
        return success_response(data=data.as_dict())
    except Exception as e:
        frappe.log_error(title="æ“ä½œå¤±è´¥", message=str(e))
        return error_response(message=str(e))
```

### 5.5 Vueç»„ä»¶å¼€å‘

```vue
<script setup>
import { ref, computed, onMounted } from 'vue'
import { call } from 'frappe-ui'

// å“åº”å¼çŠ¶æ€
const data = ref([])
const loading = ref(false)

// è®¡ç®—å±æ€§
const filteredData = computed(() => {
  return data.value.filter(item => item.active)
})

// APIè°ƒç”¨
const fetchData = async () => {
  loading.value = true
  try {
    const response = await call('your.api.method', { param: 'value' })
    if (response?.status === 'success') {
      data.value = response.data
    }
  } finally {
    loading.value = false
  }
}

onMounted(() => {
  fetchData()
})
</script>

<template>
  <div class="p-6">
    <div v-if="loading">åŠ è½½ä¸­...</div>
    <div v-else>
      <!-- å†…å®¹ -->
    </div>
  </div>
</template>
```

---

## APIæ–‡æ¡£

### 6.1 APIæ¦‚è§ˆ

æ‰€æœ‰APIä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

**æˆåŠŸå“åº”**:
```json
{
  "status": "success",
  "data": { ... },
  "message": "æ“ä½œæˆåŠŸ"
}
```

**é”™è¯¯å“åº”**:
```json
{
  "status": "error",
  "message": "é”™è¯¯ä¿¡æ¯"
}
```

### 6.2 ä¸»è¦APIæ¨¡å—

è¯¦ç»†APIæ–‡æ¡£è¯·å‚è€ƒï¼š
- [APIå¿«é€Ÿå‚è€ƒ](./API_QUICK_REFERENCE.md)
- [APIæµ‹è¯•æ–‡æ¡£](./API_TEST_README.md)
- [APIè¿ç§»æ–‡æ¡£](./API_MIGRATION.md)

**Dashboard API**:
- `get_dashboard_data` - è·å–çœ‹æ¿æ•°æ®
- `get_filter_options` - è·å–ç­›é€‰é€‰é¡¹

**Commodity API**:
- `get_store_commodity_data` - è·å–å•†å“æ•°æ®
- `bulk_insert_commodity_schedule` - æ‰¹é‡æ’å…¥å•†å“
- `batch_update_quantity` - æ‰¹é‡æ›´æ–°æ•°é‡
- `batch_delete_items` - æ‰¹é‡åˆ é™¤

**Approval API**:
- `get_approval_status` - è·å–å®¡æ‰¹çŠ¶æ€
- `submit_for_approval` - æäº¤å®¡æ‰¹
- `approve_task_store` - å®¡æ‰¹æ“ä½œ
- `withdraw_approval` - æ’¤å›å®¡æ‰¹
- `get_approval_history` - è·å–å®¡æ‰¹å†å²

**Import/Export API**:
- `download_import_template` - ä¸‹è½½å¯¼å…¥æ¨¡æ¿
- `import_commodity_data` - å¯¼å…¥å•†å“æ•°æ®
- `export_commodity_data` - å¯¼å‡ºå•†å“æ•°æ®

---

## éƒ¨ç½²è¯´æ˜

### 7.1 ç”Ÿäº§ç¯å¢ƒæ„å»º

```bash
# 1. æ„å»ºVueå‰ç«¯
cd apps/product_sales_planning/frontend
yarn build

# 2. æ„å»ºFrappeèµ„æº
bench build --app product_sales_planning

# 3. æ¸…é™¤ç¼“å­˜
bench --site [site-name] clear-cache

# 4. é‡å¯æœåŠ¡
bench restart
```

### 7.2 æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨Redisç¼“å­˜
- å¯ç”¨Gzipå‹ç¼©
- é…ç½®CDNåŠ é€Ÿ
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

### 7.3 å®‰å…¨é…ç½®

- ç§»é™¤`ignore_csrf: 1`é…ç½®
- é…ç½®HTTPS
- è®¾ç½®é˜²ç«å¢™è§„åˆ™
- å®šæœŸå¤‡ä»½æ•°æ®

---

## å¸¸è§é—®é¢˜

### 8.1 é¡µé¢æ˜¾ç¤ºç©ºç™½

**åŸå› **: ç¼“å­˜æœªæ¸…é™¤æˆ–æ„å»ºå¤±è´¥

**è§£å†³**:
```bash
bench --site [site-name] clear-cache
bench restart
```

### 8.2 APIè°ƒç”¨å¤±è´¥

**åŸå› **: CSRF tokenéªŒè¯å¤±è´¥

**è§£å†³**: åœ¨`site_config.json`ä¸­æ·»åŠ `"ignore_csrf": 1`ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰

### 8.3 å®¡æ‰¹æŒ‰é’®ä¸æ˜¾ç¤º

**åŸå› **: æƒé™ä¸è¶³æˆ–å®¡æ‰¹æµç¨‹æœªé…ç½®

**è§£å†³**: 
1. æ£€æŸ¥ç”¨æˆ·è§’è‰²æƒé™
2. ç¡®è®¤å®¡æ‰¹å·¥ä½œæµå·²é…ç½®
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### 8.4 å‰ç«¯æ„å»ºå¤±è´¥

**è§£å†³**:
```bash
cd frontend
rm -rf node_modules yarn.lock
yarn install
yarn build
```

---

## ç›¸å…³æ–‡æ¡£

- [CLAUDE.md](./CLAUDE.md) - å®Œæ•´å¼€å‘æŒ‡å—
- [å®¡æ‰¹æµç¨‹æ–‡æ¡£](./å®¡æ‰¹æµç¨‹æ–‡æ¡£.md) - å®¡æ‰¹æµç¨‹è¯¦ç»†è¯´æ˜
- [åº—é“ºè¯¦æƒ…é¡µæ–‡æ¡£](./åº—é“ºè¯¦æƒ…é¡µæ–‡æ¡£.md) - åº—é“ºè¯¦æƒ…é¡µåŠŸèƒ½è¯´æ˜
- [frappe-uié›†æˆä½¿ç”¨](./frappe-uié›†æˆä½¿ç”¨.md) - frappe-uiä½¿ç”¨æŒ‡å—
- [APIè¿ç§»æ–‡æ¡£](./API_MIGRATION.md) - APIè¿ç§»è¯´æ˜

---

## æ›´æ–°æ—¥å¿—

### v2.0.0 (2025-12-13)
- âœ… å®Œæˆå®¡æ‰¹æµç¨‹åŠŸèƒ½
- âœ… å®Œæˆåº—é“ºè¯¦æƒ…é¡µé‡æ„
- âœ… ä¼˜åŒ–APIæ¶æ„
- âœ… å®Œå–„æ–‡æ¡£ä½“ç³»

### v1.0.0 (2025-12-12)
- âœ… å®Œæˆå‰ç«¯é‡æ„
- âœ… å®ŒæˆAPIæµ‹è¯•å¥—ä»¶
- âœ… å®ŒæˆåŸºç¡€åŠŸèƒ½å¼€å‘

---

**ç‰ˆæœ¬**: 2.0.0  
**æœ€åæ›´æ–°**: 2025-12-13  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ